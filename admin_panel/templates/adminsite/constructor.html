<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>AdminSite Конструктор</title>
    <link rel="stylesheet" href="/static/adminsite/constructor.css">
</head>
<body>
<header>
    <div class="flex" style="gap:14px;">
        <div style="font-size:20px; font-weight:bold;">AdminSite Конструктор</div>
        <span class="pill">{{ user.username }}</span>
    </div>
    <div class="nav">
        <a href="/adminbot">AdminBot</a>
        <a href="/adminsite">AdminSite</a>
        <a href="/admin/users">Админы</a>
        <a href="/admin/profile">Профиль</a>
        <form method="post" action="/logout" style="margin:0;">
            <button class="btn-secondary" type="submit">Выйти</button>
        </form>
    </div>
</header>
<main>
    <h1>Категории, элементы и WebApp кнопка</h1>
    <p class="muted">Управляйте категориями и элементами витрины. Используйте вкладку «WebApp кнопка», чтобы настроить действие красной кнопки.</p>

    <div id="global-status" class="status"></div>

    <div class="tabs">
        <button class="tab active" data-tab="categories-product">Категории товаров</button>
        <button class="tab" data-tab="categories-course">Категории мастер-классов</button>
        <button class="tab" data-tab="items-product">Товары</button>
        <button class="tab" data-tab="items-course">Мастер-классы</button>
        <button class="tab" data-tab="webapp">WebApp кнопка</button>
    </div>

    <section class="panel active" id="panel-categories-product">
        <div class="card">
            <div class="table-top">
                <div>
                    <h3 style="margin:0;">Категории товаров</h3>
                    <p class="muted">Slug можно оставить пустым — сервер сгенерирует его.</p>
                </div>
                <button id="category-create-product" class="btn-primary" type="button">Создать</button>
            </div>
            <div class="status" id="status-categories-product"></div>
            <table>
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Slug</th>
                    <th>Active</th>
                    <th>Sort</th>
                    <th>Created</th>
                    <th>Действия</th>
                </tr>
                </thead>
                <tbody id="categories-list-product"></tbody>
            </table>
        </div>
    </section>

    <section class="panel" id="panel-categories-course">
        <div class="card">
            <div class="table-top">
                <div>
                    <h3 style="margin:0;">Категории мастер-классов</h3>
                    <p class="muted">Для типа course: slug можно оставить пустым.</p>
                </div>
                <button id="category-create-course" class="btn-primary" type="button">Создать</button>
            </div>
            <div class="status" id="status-categories-course"></div>
            <table>
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Slug</th>
                    <th>Active</th>
                    <th>Sort</th>
                    <th>Created</th>
                    <th>Действия</th>
                </tr>
                </thead>
                <tbody id="categories-list-course"></tbody>
            </table>
        </div>
    </section>

    <section class="panel" id="panel-items-product">
        <div class="card">
            <div class="table-top">
                <div>
                    <h3 style="margin:0;">Товары</h3>
                    <p class="muted">CRUD для элементов типа product.</p>
                </div>
                <div class="flex">
                    <input type="search" id="items-search-product" class="search-input" placeholder="Поиск по названию">
                    <select id="items-filter-product"></select>
                    <button id="item-create-product" class="btn-primary" type="button">Создать</button>
                </div>
            </div>
            <div class="status" id="status-items-product"></div>
            <table>
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Category</th>
                    <th>Price</th>
                    <th>Active</th>
                    <th>Sort</th>
                    <th>Действия</th>
                </tr>
                </thead>
                <tbody id="items-list-product"></tbody>
            </table>
        </div>
    </section>

    <section class="panel" id="panel-items-course">
        <div class="card">
            <div class="table-top">
                <div>
                    <h3 style="margin:0;">Мастер-классы</h3>
                    <p class="muted">CRUD для элементов типа course.</p>
                </div>
                <div class="flex">
                    <input type="search" id="items-search-course" class="search-input" placeholder="Поиск по названию">
                    <select id="items-filter-course"></select>
                    <button id="item-create-course" class="btn-primary" type="button">Создать</button>
                </div>
            </div>
            <div class="status" id="status-items-course"></div>
            <table>
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Category</th>
                    <th>Price</th>
                    <th>Active</th>
                    <th>Sort</th>
                    <th>Действия</th>
                </tr>
                </thead>
                <tbody id="items-list-course"></tbody>
            </table>
        </div>
    </section>

    <section class="panel" id="panel-webapp">
        <div class="card" style="max-width:880px;">
            <div class="table-top">
                <div>
                    <h3 style="margin:0;">WebApp кнопка</h3>
                    <p class="muted">Переключатели type/scope и действие красной кнопки.</p>
                </div>
                <button id="webapp-reload" class="btn-secondary" type="button">Обновить</button>
            </div>
            <div class="status" id="status-webapp"></div>
            <form id="webapp-form">
                <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));">
                    <div>
                        <label>Тип
                            <select name="type" id="webapp-type">
                                <option value="product">product</option>
                                <option value="course">course</option>
                            </select>
                        </label>
                    </div>
                    <div>
                        <label>Scope
                            <select name="scope" id="webapp-scope">
                                <option value="global">global</option>
                                <option value="category">category</option>
                            </select>
                        </label>
                    </div>
                    <div id="webapp-category-wrapper">
                        <label>Категория
                            <select name="category_id" id="webapp-category"></select>
                        </label>
                    </div>
                    <div>
                        <label>Label
                            <input type="text" name="action_label" id="webapp-label" placeholder="Оформить" />
                        </label>
                    </div>
                    <div>
                        <label>Минимум выбранных
                            <input type="number" name="min_selected" id="webapp-min-selected" min="0" value="1" />
                        </label>
                    </div>
                    <div style="display:flex; align-items:center; gap:8px; margin-top:26px;">
                        <input type="checkbox" id="webapp-enabled" />
                        <label for="webapp-enabled" class="muted">action_enabled</label>
                    </div>
                </div>
                <div class="actions" style="margin-top:18px;">
                    <button class="btn-primary" type="submit">Сохранить</button>
                </div>
            </form>
        </div>
    </section>
</main>
<script type="module" src="/static/adminsite/constructor.js"></script>
</body>
</html>
