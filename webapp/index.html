{% extends "base.html" %}
{% set active_page = 'home' %}
{% set body_class = 'page-index' %}

{% block title %}MiniDeN — уютные корзинки и мастер-классы{% endblock %}

{% block breadcrumbs %}
  {% set breadcrumbs_id = 'home-breadcrumbs' %}
  {% set breadcrumbs_items = [{'label': 'Главная'}] %}
  {% include 'components/breadcrumbs.html' %}
{% endblock %}

{% block content %}
  <!-- Обновляйте номер версии (?v=20241205) в ссылках на js/css после любых правок фронтенда, чтобы сбрасывать кэш в браузерах. -->
  <section class="lifestyle-hero reveal">
      <div class="hero-body">
        <span class="hero-eyebrow">Miniden • домашнее вязание</span>
        <h1 class="hero-title">Дом, который вяжется руками</h1>
        <p class="hero-subtitle">Мини-истории о корзинках, детских комнатах и спокойных вечерах. Всё, что делаю, — про уют, семью и обучение без спешки.</p>
        <div class="hero-cta">
          <a class="btn secondary" href="#story">Узнать историю</a>
        </div>
      </div>
      <div class="hero-visual hover-lift">
        <img
          src="/static/img/home-placeholder.svg"
          data-fallback="/static/img/home-placeholder.svg"
          alt="Уютный дом и вязание"
        />
      </div>
    </section>

    <section class="visual-grid reveal" aria-label="Темы MiniDeN">
      <a class="visual-tile hover-lift" href="#story" id="tile-home-kids">
        <img
          src="/static/img/home-placeholder.svg"
          data-fallback="/static/img/home-placeholder.svg"
          alt="Дом и дети"
        />
        <span>Дом и дети</span>
      </a>
      <a class="visual-tile hover-lift" href="#process" id="tile-process">
        <img
          src="/static/img/home-placeholder.svg"
          data-fallback="/static/img/home-placeholder.svg"
          alt="Процесс вязания"
        />
        <span>Процесс</span>
      </a>
      <a class="visual-tile hover-lift" href="/products.html" id="tile-baskets">
        <img
          src="/static/img/home-placeholder.svg"
          data-fallback="/static/img/home-placeholder.svg"
          alt="Мои корзинки"
        />
        <span>Мои корзинки</span>
      </a>
      <a class="visual-tile hover-lift" href="/masterclasses.html" id="tile-learning">
        <img
          src="/static/img/home-placeholder.svg"
          data-fallback="/static/img/home-placeholder.svg"
          alt="Обучение вязанию"
        />
        <span>Обучение</span>
      </a>
    </section>

    <section class="story-strip reveal" id="story">
      <div class="story-avatar">
        <img
          src="/static/img/home-placeholder.svg"
          data-fallback="/static/img/home-placeholder.svg"
          alt="Миниден"
        />
      </div>
      <div>
        <strong>Немного обо мне</strong>
        <p>Я вяжу дома. Учу так, как училась сама: без спешки, в тишине и с акцентом на уютные вещи для семьи.</p>
      </div>
    </section>

    <section class="info-panel reveal" id="process">
      <h2>Процесс</h2>
      <p class="muted">От выбора пряжи до упаковки — всё делаю сама, небольшими партиями и с вниманием к мелочам. Так изделия получаются тёплыми и долгими в носке.</p>
    </section>

    <section class="cta-card reveal hover-lift" id="shop-entry">
      <div>
        <h3>Корзинки и наборы</h3>
        <p>Небольшие вещи, которые собирают дом воедино: органайзеры, подарочные композиции и акценты для детских комнат.</p>
        <a class="btn" href="/products.html">Перейти в каталог</a>
      </div>
      <div class="cta-card__media">
        <img
          src="/static/img/home-placeholder.svg"
          data-fallback="/static/img/home-placeholder.svg"
          alt="Вязаные корзинки"
        />
      </div>
    </section>

    <section class="cta-card cta-card--reverse reveal hover-lift" id="learning-entry">
      <div class="cta-card__media">
        <img
          src="/static/img/home-placeholder.svg"
          data-fallback="/static/img/home-placeholder.svg"
          alt="Процесс обучения вязанию"
        />
      </div>
      <div>
        <h3>Мастер-классы</h3>
        <p>Для тех, кто хочет начать и дойти до результата. Простые шаги, поддержка и вдохновение, чтобы связать своё первое изделие.</p>
        <a class="btn secondary" href="/masterclasses.html">Смотреть обучение</a>
      </div>
    </section>

    <section class="section reveal" id="home-posts" style="display:none;">
      <h2>Новости и идеи</h2>
      <div class="home-posts-grid" id="home-posts-grid"></div>
      <div class="muted" id="home-posts-empty" style="display:none;">Скоро здесь появятся новости</div>
    </section>

    <section class="section reveal" id="telegram-login-section">
      <h2>Вход через Telegram</h2>
      <p>
        Чтобы синхронизировать корзину и профиль с ботом MiniDeN, войдите через Telegram. После успешного входа вы будете перенаправлены в профиль (profile.html), где увидите ваши заказы, корзину и курсы.
      </p>
      <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
        <button class="btn" id="btn-login-telegram" type="button">Войти через Telegram</button>
      </div>
    </section>

    <section class="section reveal" id="auth-status" style="display: none;">
      <h2>Вы уже вошли</h2>
      <p id="auth-username" class="muted"></p>
      <div class="hero-cta">
        <a class="btn" href="/profile.html">Перейти в профиль</a>
        <button class="btn secondary" type="button" id="switch-user-btn">Сменить пользователя</button>
      </div>
    </section>
{% endblock %}

{% block footer %}
  <footer class="reveal">
    <div>
      Готовы помочь в Telegram:
      <a id="bot-link-footer" href="https://t.me/BotMiniden_bot" target="_blank" rel="noopener">бот MiniDeN</a>
    </div>
    <div>
      Новости и вдохновение:
      <a id="channel-link-footer" href="https://t.me/petelka_za_petelko" target="_blank" rel="noopener">Telegram-канал</a>
    </div>
    <div>Мы в соцсетях: <a href="https://www.instagram.com/balabanova_knit?igsh=MWhuMWFnOG8zejl6dQ==">Instagram*</a> • <a href="https://vk.com/club233836469">VK</a></div>
  </footer>
{% endblock %}

{% block extra_scripts %}
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="/js/home_page.js?v=20250610"></script>
{% endblock %}
